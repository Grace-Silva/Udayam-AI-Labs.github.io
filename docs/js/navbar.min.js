document.addEventListener("DOMContentLoaded",function(){const header=document.getElementById("main-header");const menuToggle=document.getElementById("menu-toggle");const navMenu=document.querySelector(".nav-menu");const navOverlay=document.getElementById("nav-overlay");const navLinksList=document.getElementById("nav-links");const allNavLinks=navLinksList.querySelectorAll("a");const dropdownToggles=navLinksList.querySelectorAll(".dropdown-toggle");const sections=document.querySelectorAll("section[id]");function handleScroll(){if(window.scrollY>50){header.classList.add("scrolled")}else{header.classList.remove("scrolled")}
let currentSectionId="";const scrollPosition=window.scrollY+header.offsetHeight+50;sections.forEach((section)=>{if(scrollPosition>=section.offsetTop){currentSectionId=section.getAttribute("id")}});allNavLinks.forEach((link)=>{link.classList.remove("active-link");if(link.getAttribute("href").includes(currentSectionId)&&currentSectionId){link.classList.add("active-link")}})}
window.addEventListener("scroll",handleScroll);handleScroll();function toggleMenu(){const isActive=navMenu.classList.toggle("active");menuToggle.classList.toggle("active");navOverlay.classList.toggle("active");menuToggle.setAttribute("aria-expanded",isActive);document.body.style.overflow=isActive?"hidden":"";if(!isActive){navLinksList.querySelectorAll(".dropdown").forEach((d)=>d.classList.remove("active"))}}
if(menuToggle&&navMenu){menuToggle.addEventListener("click",toggleMenu);navOverlay.addEventListener("click",toggleMenu)}
allNavLinks.forEach((link)=>{if(!link.classList.contains("dropdown-toggle")){link.addEventListener("click",()=>{if(navMenu.classList.contains("active")){menuToggle.click()}})}});dropdownToggles.forEach((toggle)=>{toggle.addEventListener("click",function(e){if(window.innerWidth<=992){e.preventDefault();const parentDropdown=this.closest(".dropdown");const wasActive=parentDropdown.classList.contains("active");navLinksList.querySelectorAll(".dropdown").forEach((d)=>{d.classList.remove("active");d.querySelector(".dropdown-toggle").setAttribute("aria-expanded","false")});if(!wasActive){parentDropdown.classList.add("active");this.setAttribute("aria-expanded","true")}}})});document.querySelectorAll('a[href^="#"]').forEach((anchor)=>{anchor.addEventListener("click",function(e){const href=this.getAttribute("href");if(href&&href!=="#"&&document.querySelector(href)){e.preventDefault();const targetElement=document.querySelector(href);const headerOffset=header.offsetHeight;const elementPosition=targetElement.getBoundingClientRect().top;const offsetPosition=elementPosition+window.pageYOffset-headerOffset;window.scrollTo({top:offsetPosition,behavior:"smooth",})}})})})